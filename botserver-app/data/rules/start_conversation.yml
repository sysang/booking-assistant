version: "2.0"

rules:
- rule: greet then start conversation
  condition:
    - slot_was_set:
      - botmind_state: attentive
      - botmind_context: idle
      - botmemo_booking_progress: null
      - bkinfo_area_flag: empty
      - bkinfo_checkin_time_flag: empty
      - bkinfo_duration_flag: empty
      - bkinfo_bed_type_flag: empty
      - bkinfo_room_id_flag: empty
      - search_result_flag: null
  steps:
  - intent: greet
  - action: botacts_start_conversation
  - slot_was_set:
    - botmind_context: chitchat
  - action: utter_greet

- rule: chitchat then start working on booking
  condition:
    - slot_was_set:
      - botmind_state: attentive
      - botmind_context: chitchat
      - botmemo_booking_progress: null
      - bkinfo_area_flag: empty
      - bkinfo_checkin_time_flag: empty
      - bkinfo_duration_flag: empty
      - bkinfo_bed_type_flag: empty
      - bkinfo_room_id_flag: empty
      - search_result_flag: null
  steps:
  - intent: request_searching_hotel
  - action: botacts_express_bot_job_to_support_booking
  - slot_was_set:
    - botmind_context: workingonbooking
    - botmemo_booking_progress: initialized
  - action: utter_bot_job_to_support_booking
  - action: utter_asking_area

- rule: idle then start working on booking
  condition:
    - slot_was_set:
      - botmind_state: attentive
      - botmind_context: idle
      - botmemo_booking_progress: null
      - bkinfo_area_flag: empty
      - bkinfo_checkin_time_flag: empty
      - bkinfo_duration_flag: empty
      - bkinfo_bed_type_flag: empty
      - bkinfo_room_id_flag: empty
      - search_result_flag: null
  steps:
  - intent: request_searching_hotel
  - action: botacts_express_bot_job_to_support_booking
  - slot_was_set:
    - botmind_context: workingonbooking
    - botmemo_booking_progress: initialized
  - action: utter_bot_job_to_support_booking
  - action: utter_asking_area
