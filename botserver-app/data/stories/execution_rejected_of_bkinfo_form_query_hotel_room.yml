version: "3.1"

stories:
- story: when bkinfo_area is being collected, unexpected information is provided
  steps:
  - slot_was_set:
    - botmind_state: attentive
    - botmind_context: workingonbooking
    - botmemo_booking_progress: initialized
    - botmemo_bkinfo_status: [null,null,null,null,null]
    - bkinfo_room_id: null
    - search_result_flag: waiting
  - action: bkinfo_form
  - active_loop: bkinfo_form
  - slot_was_set:
    - requested_slot: bkinfo_area
  - or:
    - intent: express_time
    - intent: request_checkin_time
    - intent: express_length_of_time
    - intent: request_room_reservation_duration
    - intent: request_bed_type
    - intent: express_bed_type
    - intent: express_expected_mountof_money
    - intent: express_mountof_money
  - action: action_execution_rejected
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_express_confused_by_unlikely_bkinfo
  - action: bkinfo_form
  - active_loop: bkinfo_form
  - slot_was_set:
    - requested_slot: bkinfo_area

- story: when bkinfo_checkin_time is being collected, unexpected information is provided
  steps:
  - slot_was_set:
    - botmind_state: attentive
    - botmind_context: workingonbooking
    - botmemo_booking_progress: information_collecting
    - botmemo_bkinfo_status: ['bkinfo_area',null,null,null,null]
    - bkinfo_room_id: null
    - search_result_flag: waiting
  - action: bkinfo_form
  - active_loop: bkinfo_form
  - slot_was_set:
    - requested_slot: bkinfo_checkin_time
  - or:
    - intent: request_listing_hotel_by_area
    - intent: express_area
    - intent: express_length_of_time
    - intent: request_room_reservation_duration
    - intent: request_bed_type
    - intent: express_bed_type
    - intent: express_expected_mountof_money
    - intent: express_mountof_money
  - action: action_execution_rejected
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_express_confused_by_unlikely_bkinfo
  - action: bkinfo_form
  - active_loop: bkinfo_form
  - slot_was_set:
    - requested_slot: bkinfo_checkin_time

- story: when bkinfo_duration is being collected, unexpected information is provided
  steps:
  - slot_was_set:
    - botmind_state: attentive
    - botmind_context: workingonbooking
    - botmemo_booking_progress: information_collecting
    - botmemo_bkinfo_status: ['bkinfo_area','bkinfo_checkin_time',null,null,null]
    - bkinfo_room_id: null
    - search_result_flag: waiting
  - action: bkinfo_form
  - active_loop: bkinfo_form
  - slot_was_set:
    - requested_slot: bkinfo_duration
  - or:
    - intent: request_listing_hotel_by_area
    - intent: express_area
    - intent: express_time
    - intent: request_checkin_time
    - intent: request_bed_type
    - intent: express_bed_type
    - intent: express_expected_mountof_money
    - intent: express_mountof_money
  - action: action_execution_rejected
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_express_confused_by_unlikely_bkinfo
  - action: bkinfo_form
  - active_loop: bkinfo_form
  - slot_was_set:
    - requested_slot: bkinfo_duration

- story: when bkinfo_bed_type is being collected, unexpected information is provided
  steps:
  - slot_was_set:
    - botmind_state: attentive
    - botmind_context: workingonbooking
    - botmemo_booking_progress: information_collecting
    - botmemo_bkinfo_status: ['bkinfo_area','bkinfo_checkin_time','bkinfo_duration',null,null]
    - bkinfo_room_id: null
    - search_result_flag: waiting
  - action: bkinfo_form
  - active_loop: bkinfo_form
  - slot_was_set:
    - requested_slot: bkinfo_bed_type
  - or:
    - intent: request_listing_hotel_by_area
    - intent: express_area
    - intent: express_time
    - intent: request_checkin_time
    - intent: express_length_of_time
    - intent: request_room_reservation_duration
    - intent: express_expected_mountof_money
    - intent: express_mountof_money
  - action: action_execution_rejected
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_express_confused_by_unlikely_bkinfo
  - action: bkinfo_form
  - active_loop: bkinfo_form
  - slot_was_set:
    - requested_slot: bkinfo_bed_type

- story: when bkinfo_price is being collected, unexpected information is provided
  steps:
  - slot_was_set:
    - botmind_state: attentive
    - botmind_context: workingonbooking
    - botmemo_booking_progress: information_collecting
    - botmemo_bkinfo_status: ['bkinfo_area','bkinfo_checkin_time','bkinfo_duration','bkinfo_bed_type',null]
    - bkinfo_room_id: null
    - search_result_flag: waiting
  - action: bkinfo_form
  - active_loop: bkinfo_form
  - slot_was_set:
    - requested_slot: bkinfo_price
  - or:
    - intent: request_listing_hotel_by_area
    - intent: express_area
    - intent: express_time
    - intent: request_checkin_time
    - intent: express_length_of_time
    - intent: request_room_reservation_duration
    - intent: request_bed_type
    - intent: express_bed_type
  - action: action_execution_rejected
  - action: action_deactivate_loop
  - active_loop: null
  - action: utter_express_confused_by_unlikely_bkinfo
  - action: bkinfo_form
  - active_loop: bkinfo_form
  - slot_was_set:
    - requested_slot: bkinfo_price

