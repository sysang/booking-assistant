version: "2.0"

stories:
- story: query hotel room, start to end flow
  steps:
  - slot_was_set:
    # The declaration here is not meaningful as training data
    # They are all identical to initial values,
    # but it's make informative overview which slots have influence on stories
    - botmind_state: attentive
    - botmind_context: workingonbooking
    - botmemo_booking_progress: initialized
    - bkinfo_area_flag: empty
    - bkinfo_checkin_time_flag: empty
    - bkinfo_duration_flag: empty
    - bkinfo_room_type_flag: empty
    - bkinfo_room_id_flag: empty
    - search_result_flag: null
  - action: utter_asking_area
  - or:
    - intent: request_listing_hotel_by_area
      entities:
        - area: hawaii
    - intent: express_area
      entities:
        - area: hawaii
  - action: set_booking_information__area__
  - slot_was_set:
    - bkinfo_area_flag: present
    - botmemo_booking_progress: information_collecting
  - action: utter_asking_checkin_time
  - or:
    - intent: express_time
      entities:
        - time: september 5th
    - intent: request_checkin_time
      entities:
        - time: september 5th
  - action: set_booking_information__checkin_time__
  - slot_was_set:
    - bkinfo_checkin_time_flag: present
  - action: utter_asking_staying_duration
  - or:
    - intent: express_length_of_time
      entities:
        - duration: 1 day
    - intent: request_room_reservation_duration
      entities:
        - duration: five days
  - action: set_booking_information__duration__
  - slot_was_set:
    - bkinfo_duration_flag: present
  - action: utter_asking_room_type
  - intent: request_room_type
    entities:
      - room_type: single
  - action: set_booking_information__room_type__
  - slot_was_set:
    - bkinfo_room_type_flag: present
    - botmemo_booking_progress: done_information_collecting
  - action: set_notes_bkinfo
  - slot_was_set:
    - bkinfo_area_flag: noted
    - bkinfo_checkin_time_flag: noted
    - bkinfo_duration_flag: noted
    - bkinfo_room_type_flag: noted
  - action: botacts_show_room_list
  - slot_was_set:
    - search_result_flag: available
  - intent: user_click_to_select_hotel
    entities:
      - room_id: 1
  - action: set_booking_information__room_id__
  - slot_was_set:
    - bkinfo_room_id_flag: present
    - botmemo_booking_progress: room_selected
  - action: botacts_confirm_room_selection
  - slot_was_set:
    - botmind_context: idle
    - botmemo_booking_progress: null
    - bkinfo_area_flag: empty
    - bkinfo_checkin_time_flag: empty
    - bkinfo_duration_flag: empty
    - bkinfo_room_type_flag: empty
    - bkinfo_room_id_flag: empty
    - search_result_flag: null

- story: query hotel room - (logical decision) request area
  steps:
  - slot_was_set:
    - botmind_state: transitioning
    - botmind_context: workingonbooking
    - botmemo_booking_progress: information_collecting
    - bkinfo_area_flag: empty
    - bkinfo_checkin_time_flag: empty
    - bkinfo_duration_flag: present
    - bkinfo_room_type_flag: present
    - bkinfo_room_id_flag: empty
    - search_result_flag: null
  - action: pseudo_action
  - slot_was_set:
    - botmind_state: attentive
  - action: utter_asking_area
  - or:
    - intent: request_listing_hotel_by_area
      entities:
        - area: hawaii
    - intent: express_area
      entities:
        - area: hawaii
  - action: set_booking_information__area__
  - slot_was_set:
    - bkinfo_area_flag: present
  - action: utter_asking_checkin_time

- story: query hotel room - (logical decision) request check-in time
  steps:
  - slot_was_set:
    - botmind_state: transitioning
    - botmind_context: workingonbooking
    - botmemo_booking_progress: information_collecting
    - bkinfo_area_flag: present
    - bkinfo_checkin_time_flag: empty
    - bkinfo_duration_flag: empty
    - bkinfo_room_type_flag: present
    - bkinfo_room_id_flag: empty
    - search_result_flag: null
  - action: pseudo_action
  - slot_was_set:
    - botmind_state: attentive
  - action: utter_asking_checkin_time
  - or:
    - intent: express_time
      entities:
        - time: dec 1st
    - intent: request_checkin_time
      entities:
        - time: january 30th
  - action: set_booking_information__checkin_time__
  - slot_was_set:
    - bkinfo_checkin_time_flag: present
  - action: utter_asking_staying_duration

- story: query hotel room - request reservation duration
  steps:
  - slot_was_set:
    - botmind_state: transitioning
    - botmind_context: workingonbooking
    - botmemo_booking_progress: information_collecting
    - bkinfo_area_flag: present
    - bkinfo_checkin_time_flag: present
    - bkinfo_duration_flag: empty
    - bkinfo_room_type_flag: empty
    - bkinfo_room_id_flag: empty
    - search_result_flag: null
  - action: pseudo_action
  - slot_was_set:
    - botmind_state: attentive
  - action: utter_asking_staying_duration
  - or:
    - intent: express_length_of_time
      entities:
        - duration: 1 day
    - intent: request_room_reservation_duration
      entities:
        - duration: five days
  - action: set_booking_information__duration__
  - slot_was_set:
    - bkinfo_duration_flag: present
  - action: utter_asking_room_type

- story: query hotel room - request room type
  steps:
  - slot_was_set:
    - botmind_state: transitioning
    - botmind_context: workingonbooking
    - botmemo_booking_progress: information_collecting
    - bkinfo_area_flag: present
    - bkinfo_checkin_time_flag: present
    - bkinfo_duration_flag: present
    - bkinfo_room_type_flag: empty
    - bkinfo_room_id_flag: empty
    - search_result_flag: null
  - action: pseudo_action
  - slot_was_set:
    - botmind_state: attentive
  - action: utter_asking_room_type
  - intent: request_room_type
    entities:
      - room_type: single
  - action: set_booking_information__room_type__
  - slot_was_set:
    - bkinfo_room_type_flag: present
    - botmemo_booking_progress: done_information_collecting
  - action: set_notes_bkinfo
  - slot_was_set:
    - bkinfo_area_flag: noted
    - bkinfo_checkin_time_flag: noted
    - bkinfo_duration_flag: noted
    - bkinfo_room_type_flag: noted
  - action: botacts_show_room_list
  - slot_was_set:
    - search_result_flag: available

- story: query hotel room - (multi-intent) request check-in time, reservation duration
  steps:
  - slot_was_set:
    - botmind_state: attentive
    - botmind_context: workingonbooking
    - botmemo_booking_progress: information_collecting
    - bkinfo_area_flag: empty
    - bkinfo_checkin_time_flag: empty
    - bkinfo_duration_flag: empty
    - bkinfo_room_type_flag: present
    - bkinfo_room_id_flag: empty
    - search_result_flag: null
  - intent: request_checkin_time+request_room_reservation_duration
    entities:
      - time: this sunday
      - duration: three days
  - action: set_booking_information__duration__
  - slot_was_set:
    - bkinfo_duration_flag: present
  - action: set_booking_information__checkin_time__
  - slot_was_set:
    - bkinfo_checkin_time_flag: present
  - action: utter_asking_area

- story: query hotel room - (multi-intent) request hotel by area, request check-in time
  steps:
  - slot_was_set:
    - botmind_state: attentive
    - botmind_context: idle
    - botmemo_booking_progress: null
    - bkinfo_area_flag: empty
    - bkinfo_checkin_time_flag: empty
    - bkinfo_duration_flag: empty
    - bkinfo_room_type_flag: empty
    - bkinfo_room_id_flag: empty
    - search_result_flag: null
  - intent: request_listing_hotel_by_area+request_checkin_time
    entities:
      - area: broward county
      - time: this sunday
  - action: set_booking_information__area__
  - slot_was_set:
    - botmind_context: workingonbooking
    - botmemo_booking_progress: information_collecting
    - bkinfo_area_flag: present
  - action: set_booking_information__checkin_time__
  - slot_was_set:
    - bkinfo_checkin_time_flag: present
  - action: utter_asking_staying_duration
